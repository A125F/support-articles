<h3>How to set a dated file name using workspaces and environment variables<br><span></span>
</h3>
<p> </p>
<div>
    <pre><span># Use the latest 2.1 version of CircleCI pipeline process engine.</span><br><span># See: https://circleci.com/docs/2.0/configuration-reference</span><br><br><span>version</span><span>: </span><span>2.1</span><br><br><span>jobs</span><span>:</span><br><span> </span><span>say-date</span><span>:<br></span><span>  executor</span><br><span>     </span><span>docker</span><span>:</span><br><span>       - </span><span>image</span><span>: </span><span>cimg/base:stable</span><br><span>  </span><span>parameters</span><span>:</span><br><span>    </span><span>date</span><span>:</span><br><span>      </span><span>type</span><span>: </span><span>string</span><br><span>      </span><span>default</span><span>: </span><span>none</span><br><span>   </span><span>steps</span><span>:</span><br><span>    - </span><span>checkout</span><br><span>    - </span><span>run</span><span>:</span><br><span>      name</span><span>: </span><span>set var</span><br><span>        command</span><span>: </span><span>echo "export DATETIME=`date +%Y%m%d.%H%M`" &gt;&gt; $BASH_ENV</span><br><span>    - </span><span>run</span><span>: </span><span>echo "$DATETIME"</span><br><span>    - </span><span>run</span><span>: </span><span>mkdir -p workspace</span><br><span>    - </span><span>run</span><span>: </span><span>echo "export DATETIME=datetime.`date +%Y%m%d.%H%M%S`" &gt;&gt;workspace/new-env-vars</span><br><span>    - </span><span>run</span><span>: </span><span>echo "export BOB=$BAZ" &gt;&gt; workspace/new-env-vars</span><br><span>    - </span><span>run</span><span>: </span><span>cat workspace/new-env-vars </span><br><span>    - </span><span>run</span><span>: </span><span>cat workspace/new-env-vars &gt;&gt; $BASH_ENV</span><br><span>    - </span><span>run</span><span>: </span><span>echo ${DATETIME:-NULL}</span><br><span>    - </span><span>run</span><span>: </span><br><span>        </span><span>name</span><span>: </span><span>make test artifacts</span><br><span>        command</span><span>: |</span><br><span>          mkdir /tmp/artifacts;</span><br><span>          echo "my artifact files in a dir" &gt; /tmp/artifacts/encap-staging-no-color_${DATETIME:-NULL}.txt </span><br><span>    - </span><span>store_artifacts</span><span>:</span><br><span>        path</span><span>: </span><span>/tmp/artifacts</span><br><span>    - </span><span>persist_to_workspace</span><span>:</span><br><span>        root</span><span>: </span><span>workspace</span><br><span>        paths</span><span>:</span><br><span>          - </span><span>new-env-vars</span><br><br><span>workflows</span><span>:</span><br><span> </span><span>  say-date-workflow</span><span>:</span><br><span>    jobs</span><span>:</span><br><span>      - </span><span>say-date</span></pre>
</div>